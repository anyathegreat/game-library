import{d as L,r as f,a as N,w as J,o as q,b as at,c as S,e as v,f as x,u as a,g as _,h as F,m as lt,i as G,j as R,n as U,k as yt,t as P,l as ut,p as E,q as V,T as ft,s as p,F as ht,v as mt,x as j,y as X,z as st,_ as ct,A as wt,B as K,C as H,D as zt,S as xt,E as it,G as _t,H as St,I as Lt}from"./index-CPo6GFBs.js";var At=Object.defineProperty,bt=(n,t,e)=>t in n?At(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,o=(n,t,e)=>(bt(n,typeof t!="symbol"?t+"":t,e),e);const Tt=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e},Rt={},Et={type:"button",class:"flux-button",style:{outline:"0"}},kt={viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},Ct=p("circle",{cx:"50",cy:"50",r:"50"},null,-1),Pt={viewBox:"-20 -20 140 140"};function Ot(n,t){return v(),x("button",Et,[(v(),x("svg",kt,[Ct,(v(),x("svg",Pt,[R(n.$slots,"default")]))]))])}const Y=Tt(Rt,[["render",Ot]]),Vt=({width:n,height:t})=>n/t;class nt{constructor({top:t=null,left:e=null}={top:null,left:null}){o(this,"top",f(null)),o(this,"left",f(null)),this.update({top:t,left:e})}reset(){this.top.value=null,this.left.value=null}isValid(){return![this.top.value,this.left.value].includes(null)}update({top:t,left:e}){this.top.value=t??null,this.left.value=e??null}toValue(){const t={top:void 0,left:void 0};return this.top.value!==null&&(t.top=this.top.value),this.left.value!==null&&(t.left=this.left.value),t}toPx(){if(!this.isValid())throw new RangeError("Invalid position in pixels");return{top:this.top.value.toString()+"px",left:this.left.value.toString()+"px"}}}class Bt{constructor(t,e,s=T.fill,i=null,h,u,d){o(this,"src"),o(this,"loader",null),o(this,"errorMessage"),o(this,"status",f(B.notLoaded)),o(this,"realSize",new b),o(this,"displaySize",new b),o(this,"caption",""),o(this,"resizeType"),o(this,"backgroundColor",null),o(this,"display"),o(this,"transition"),o(this,"isLoading",()=>this.status.value===B.loading),o(this,"isLoaded",()=>this.status.value===B.loaded),o(this,"isError",()=>this.status.value===B.error),o(this,"resizeProps",S(()=>this.calcResizeProps(this.displaySize))),this.src=t,this.caption=e,this.resizeType=s,this.backgroundColor=i,this.display=h,this.transition=u,this.errorMessage=d}calcResizeProps(t){if([t.isValid(),this.realSize.isValid()].includes(!1))return{};const e=new $t(this.realSize),{size:s,position:i}=e.resizeTo(t,this.resizeType);return{...s.toValue(),...i.toValue()}}getResizeProps(t,e){const s={width:0,height:0,top:0,left:0};return this.displaySize.isValid()||this.displaySize.update(t.toValue()),Object.assign(s,t.equals(this.displaySize)?this.resizeProps.value:this.calcResizeProps(t)),e!==void 0&&(s.top-=e.top.value||0,s.left-=e.left.value||0),s}}class Ft extends Bt{constructor(t,e="",s=T.fill,i=null){const h={component:ot,props:{}},u={component:ot,props:{}},d=`Image ${t} could not be loaded`;super(t,e,s,i,h,u,d)}load(){return this.loader!==null?this.loader:(this.loader=new Promise((t,e)=>{this.status.value=B.loading;const s=new Image;s.onload=()=>this.onLoad(s,t),s.onerror=()=>this.onError(e),s.src=this.src}),this.loader)}onLoad(t,e){this.realSize=new b({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}),this.status.value=B.loaded,e()}onError(t){this.status.value=B.error,t(this.errorMessage)}}var dt=(n=>(n.notLoaded="notLoaded",n.loading="loading",n.loaded="loaded",n.error="error",n))(dt||{});const B=dt;var pt=(n=>(n.fill="fill",n.fit="fit",n))(pt||{});const T=pt,rt=n=>n>=1?"landscape":"portrait";class $t{constructor(t){if(o(this,"realSize"),o(this,"realAspectRatio"),o(this,"realOrientation"),t.isValid()===!1)throw new RangeError("Invalid real size");this.realSize=t,this.realAspectRatio=this.realSize.getAspectRatio(),this.realOrientation=rt(this.realAspectRatio)}resizeTo(t,e){if(t.isValid()===!1)throw new RangeError("Invalid size to resize");const s=t.getAspectRatio(),i=rt(s),h=this.getAdaptedSize(t,s,i,e),u=this.getAdaptedPosition(t,s,h,e);return{size:h,position:u}}getAdaptedSize(t,e,s,i){return s==="landscape"&&this.realOrientation==="portrait"&&i===T.fill?this.getAdaptedSizeByWith(t):s==="landscape"&&this.realOrientation==="landscape"&&e>=this.realAspectRatio&&i===T.fill?this.getAdaptedSizeByWith(t):s==="landscape"&&this.realOrientation==="landscape"&&e<this.realAspectRatio&&i===T.fit?this.getAdaptedSizeByWith(t):s==="portrait"&&this.realOrientation==="landscape"&&i===T.fit?this.getAdaptedSizeByWith(t):s==="portrait"&&this.realOrientation==="portrait"&&e>this.realAspectRatio&&i===T.fill?this.getAdaptedSizeByWith(t):s==="portrait"&&this.realOrientation==="portrait"&&e<=this.realAspectRatio&&i===T.fit?this.getAdaptedSizeByWith(t):this.getAdaptedSizeByHeight(t)}getAdaptedSizeByWith(t){return new b({width:t.width.value,height:t.width.value/this.realAspectRatio})}getAdaptedSizeByHeight(t){return new b({width:this.realAspectRatio*t.height.value,height:t.height.value})}getAdaptedPosition(t,e,s,i){return this.realAspectRatio<=e&&i===T.fill?this.getAdaptedPositionVertically(t,s):this.realAspectRatio>e&&i===T.fit?this.getAdaptedPositionVertically(t,s):this.getAdaptedPositionHorizontally(t,s)}getAdaptedPositionVertically(t,e){return new nt({top:(t.height.value-e.height.value)/2,left:0})}getAdaptedPositionHorizontally(t,e){return new nt({top:0,left:(t.width.value-e.width.value)/2})}}class It{constructor(t,e,s,i,h,u,d,l){o(this,"rscs",[]),o(this,"counter",{success:0,error:0,total:0}),o(this,"toPreload"),o(this,"preLoading",[]),o(this,"lazyLoading",[]),o(this,"progress",f(0)),o(this,"displaySize"),o(this,"onPreloadStart"),o(this,"onPreloadEnd"),o(this,"onLazyLoadStart"),o(this,"onLazyLoadEnd"),o(this,"isCancelled",!1),o(this,"reject"),this.rscs=t,this.toPreload=e>t.length?t.length:e,this.displaySize=s,this.onPreloadStart=i,this.onPreloadEnd=h,this.onLazyLoadStart=u,this.onLazyLoadEnd=d,this.reject=l,this.preloadStart()}preloadStart(){this.onPreloadStart();const{counter:t}=this,e=this.rscs.slice(t.total,t.total+this.toPreload-t.success);this.preLoading=this.preLoading.concat(e),e.forEach(s=>this.load(s))}preloadEnd(){const{counter:t,toPreload:e}=this;if(t.success<e&&t.total<this.rscs.length){this.preloadStart();return}const s=this.preLoading.filter(i=>i.resource.isLoaded());this.onPreloadEnd(s),this.preLoading.length=0,t.total<this.rscs.length&&this.lazyLoadStart()}lazyLoadStart(){this.onLazyLoadStart(),this.lazyLoading=this.rscs.slice(this.counter.total),this.lazyLoading.forEach(t=>this.load(t))}lazyLoadEnd(){const t=this.lazyLoading.filter(e=>e.resource.isLoaded());this.onLazyLoadEnd(t),this.lazyLoading.length=0}load(t){t.resource.load().then(()=>{this.loadSuccess(t)}).catch(e=>{this.loadError(e)}).finally(()=>{this.counter.total++,!this.isCancelled&&(this.preLoading.length!==0&&this.updateProgress(),this.counter.total===this.toPreload?this.preloadEnd():this.counter.total===this.rscs.length&&this.lazyLoadEnd())})}loadSuccess(t){this.counter.success++,!this.isCancelled&&t.resource.displaySize.update(this.displaySize.toValue())}loadError(t){this.counter.error++,!this.isCancelled&&console.error(t)}updateProgress(){this.progress.value=Math.ceil(this.counter.success*100/this.toPreload)||0}hasFinished(){return this.counter.total===this.rscs.length}cancel(){this.isCancelled=!0,this.reject("Resources loading cancelled",this.rscs)}}class b{constructor({width:t=null,height:e=null}={width:null,height:null}){o(this,"width",f(null)),o(this,"height",f(null)),this.update({width:t,height:e})}reset(){this.width.value=null,this.height.value=null}isValid(){return![this.width.value,this.height.value].includes(null)}update({width:t,height:e}){this.width.value=t??null,this.height.value=e??null}getAspectRatio(){if(!this.isValid())throw new RangeError("Could not get aspect ratio due to invalid size");return Vt(this.toValue())}clone(){return new b(this.toValue())}equals(t){return!(this.width.value!==t.width.value||this.height.value!==t.height.value)}toValue(){const t={};return this.width.value!==null&&(t.width=this.width.value),this.height.value!==null&&(t.height=this.height.value),t}toPx(){if(!this.isValid())throw new RangeError("Invalid size in pixels");return{width:this.width.value.toString()+"px",height:this.height.value.toString()+"px"}}}function gt(n,t,e){e.base===void 0&&(e.base={});const s=S(()=>{const{size:u,viewSize:d=new b}=t,{width:l=u.width.value,height:c=u.height.value}=d.toValue(),r=new b({width:l,height:c});return r.isValid()?r.toPx():{}}),i=S(()=>({...a(s),...a(e.color),...a(e.rsc),...a(t.css),...a(e.base)})),h=u=>{Object.assign(e.base,u)};return{style:i,setCss:h,transform:u=>{n.value!==null&&(n.value.clientHeight,h(u))},show:()=>{h({visibility:"visible"})},hide:()=>{h({visibility:"hidden"})}}}const ot=L({__name:"FluxImage",props:{color:{},rsc:{},size:{},viewSize:{},offset:{},css:{}},setup(n,{expose:t}){const e=n,s=f(null),i=N({base:{overflow:"hidden"},color:S(()=>{var r,g;const y={};return e.color!==void 0&&(y.backgroundColor=e.color),((r=e.rsc)==null?void 0:r.backgroundColor)!==null&&(y.backgroundColor=(g=e.rsc)==null?void 0:g.backgroundColor),y}),rsc:S(()=>{const{rsc:r,size:g,offset:y}=e;if(!r)return{};if(r.status.value===B.notLoaded)return r.load(),{};if(!r.isLoaded()||!g.isValid()||!s.value)return{};const{width:m,height:$,top:A,left:I}=r.getResizeProps(g,y);return{backgroundImage:`url(${r.src})`,backgroundSize:`${m}px ${$}px`,backgroundPosition:`${I}px ${A}px`,backgroundRepeat:"no-repeat"}})}),{style:h,setCss:u,transform:d,show:l,hide:c}=gt(s,e,i);return t({setCss:u,transform:d,show:l,hide:c}),(r,g)=>(v(),x("div",{ref_key:"$el",ref:s,class:"flux-image",style:U(a(h))},null,4))}}),Mt=L({__name:"FluxTransition",props:{size:{},transition:{},from:{},to:{},displayComponent:{},options:{default:()=>({})}},emits:["ready","start","end"],setup(n,{expose:t,emit:e}){const s=n,i=f(null),h=f(null),u=e,d=N({base:{overflow:"hidden",perspective:"none",zIndex:3}}),l=S(()=>{const{width:y,height:m}=s.size.toPx();return{...d.base,width:y,height:m}}),c=f(1);q(async()=>{await j(),h.value!==null&&(c.value=h.value.totalDuration),u("ready",{transition:s.transition,from:s.from,to:s.to,options:s.options,duration:c.value})});async function r(){u("start",{transition:s.transition,from:s.from,to:s.to,options:s.options,duration:c.value}),await j(),h.value===null?console.error("Transition component not available",s.transition):h.value.onPlay(),setTimeout(()=>g(),c.value)}function g(){u("end",{transition:s.transition,from:s.from,to:s.to,options:s.options,duration:c.value})}return at(()=>{s.displayComponent&&s.displayComponent.show()}),t({start:r}),(y,m)=>(v(),x("div",{ref_key:"$el",ref:i,class:"flux-transition",style:U(l.value)},[(v(),_(G(y.transition),{ref_key:"$transition",ref:h,size:y.size,from:y.from,to:y.to,"display-component":y.displayComponent,options:y.options,"mask-style":d.base},null,8,["size","from","to","display-component","options","mask-style"]))],4))}}),Nt=L({__name:"FluxWrapper",props:{color:{},rsc:{},size:{},viewSize:{},offset:{},css:{}},setup(n,{expose:t}){const e=n,s=f(null),i=N({base:{overflow:"hidden"}}),{style:h,setCss:u,transform:d,show:l,hide:c}=gt(s,e,i);return t({setCss:u,transform:d,show:l,hide:c}),(r,g)=>(v(),x("div",{ref_key:"$el",ref:s,class:"flux-wrapper",style:U(a(h))},[R(r.$slots,"default")],4))}});var z=(n=>(n.prev="prev",n.next="next",n))(z||{}),O=(n=>(n.stopped="stopped",n.playing="playing",n))(O||{});class Dt{constructor(){o(this,"current",null),o(this,"from",null),o(this,"to",null)}reset(){this.current=null,this.from=null,this.to=null}init(t){this.current=t.getFirst()}currentSameAs(t){return this.current.index===t.index}prepareTo(t){this.from=this.current,this.to=t}}class Wt{constructor(){o(this,"current",null),o(this,"last",null)}reset(){this.current=null,this.last=null}init(t){this.last=t.getLast()}setCurrentFinished(){this.last=this.current,this.current=null}}class Kt{static withOptions(t){return t.map(e=>{let s=e,i={};return"resource"in e&&(s=e.resource,"options"in e&&(i=e.options)),{resource:s,options:i}})}}class Ht{constructor(t){o(this,"list",X([])),o(this,"loader",f(null)),o(this,"emit"),this.emit=t}getPrev(t){return this.getByIndex(t>0?t-1:this.list.length-1)}getNext(t){return this.getByIndex(t===this.list.length-1?0:t+1)}getFirst(){return this.getByIndex(0)}getLast(){return this.getByOrder(z.prev,0)}getByIndex(t){if(this.list[t]===void 0)throw new ReferenceError(`Resource index ${t} not found`);return{index:t,rsc:this.list[t].resource,options:JSON.parse(JSON.stringify(this.list[t].options))}}getByOrder(t,e){return{prev:()=>this.getPrev(e),next:()=>this.getNext(e)}[t]()}find(t,e){if(typeof t=="number")return this.getByIndex(t);if(e===void 0)throw new ReferenceError("Missing currentIndex parameter");return this.getByOrder(t,e)}update(t,e,s){var i,h;((i=this.loader.value)==null?void 0:i.hasFinished())===!1&&((h=this.loader.value)==null||h.cancel()),this.list.splice(0);const u=Kt.withOptions(t);return new Promise((d,l)=>{this.loader.value=new It(u,e,s,()=>this.preloadStart(),c=>this.preloadEnd(c,d),()=>this.lazyLoadStart(),c=>this.lazyLoadEnd(c),l)})}preloadStart(){this.emit("resourcesPreloadStart")}preloadEnd(t,e){this.list.push(...t),this.emit("resourcesPreloadEnd"),e()}lazyLoadStart(){this.emit("resourcesLazyloadStart")}lazyLoadEnd(t){this.list.push(...t),this.emit("resourcesLazyloadEnd")}}class Gt{static withOptions(t){return t.map(e=>{let s=e,i={};return"component"in e&&(s=e.component,"options"in e&&(i=e.options)),{component:s,options:i}})}}class jt{constructor(){o(this,"list",X([]))}getPrev(t){return this.getByIndex(t>0?t-1:this.list.length-1)}getNext(t){return this.getByIndex(t===this.list.length-1?0:t+1)}getFirst(){return this.getByIndex(0)}getLast(){return this.getByOrder(z.prev,0)}getByIndex(t){return{index:t,component:this.list[t].component,options:JSON.parse(JSON.stringify(this.list[t].options))}}getByOrder(t,e){return{prev:()=>this.getPrev(e),next:()=>this.getNext(e)}[t]()}update(t){this.list.splice(0);const e=Gt.withOptions(t);this.list.push(...e)}}class Xt{constructor(t,e,s){o(this,"resource"),o(this,"transition"),o(this,"status",f(O.stopped)),o(this,"config"),o(this,"timers"),o(this,"emit"),o(this,"resources"),o(this,"transitions"),o(this,"$displayComponent",f(null)),this.config=t,this.timers=e,this.emit=s,this.resources=new Ht(s),this.transitions=new jt,this.resource=X(new Dt),this.transition=X(new Wt)}setup(t){this.$displayComponent=t}play(t=z.next,e){var s,i;const{config:h,timers:u,resource:d}=this;if(this.status.value=O.playing,this.transition.current!==null)return;const l=(i=this.resources)==null?void 0:i.find(t,(s=d.current)==null?void 0:s.index);u.set("transition",e||(l==null?void 0:l.options.delay)||h.delay,()=>{this.show(t)}),this.emit("play",t,e)}async stop(t=!1){const{timers:e}=this;this.status.value=O.stopped,e.clear("transition"),this.transition.current!==null&&t===!0&&await this.end(t),this.emit("stop")}isReadyToShow(){if(this.resource.current===null)throw new ReferenceError("Current resource not set");if(this.resources===null)throw new ReferenceError("Resources list not set");if(this.resources.list.length===0)throw new RangeError("Resources list empty");if(this.transition.last===null)throw new ReferenceError("Last transition not set");if(this.transitions===null)throw new ReferenceError("Transitions list not set");if(this.transitions.list.length===0)throw new RangeError("Transitions list empty");if(this.$displayComponent.value===null)throw new ReferenceError("Display component not set");return!0}async show(t=z.next,e=z.next){if(!this.isReadyToShow())return;const{resource:s,resources:i,config:h,transitions:u}=this;if(this.transition.current!==null){h.allowToSkipTransition&&(await this.end(!0),this.show(t,e));return}const d=i.find(t,s.current.index);if(s.currentSameAs(d))return;s.prepareTo(d),this.timers.clear("transition");const l=typeof e=="number"?u.getByIndex(e):u.getByOrder(e,this.transition.last.index);l.options.direction===void 0&&(typeof t!="number"?l.options.direction=t:l.options.direction=this.resource.from.index<this.resource.to.index?z.next:z.prev),this.transition.current=l,this.emit("show",this.resource,this.transition)}start(){this.resource.current=this.resource.to,this.emit("transitionStart",this.resource,this.transition)}async end(t=!1){const{config:e,resource:s,resources:i,timers:h,transition:u}=this;if(!(s.current===null||i===null)){if(u.setCurrentFinished(),await j(),t===!0?this.emit("transitionCancel",this.resource,this.transition):this.emit("transitionEnd",this.resource,this.transition),this.shouldStopPlaying(e.infinite,s.current,i.list.length-1)){this.stop();return}this.shouldPlayNext()&&h.set("transition",s.current.options.delay||e.delay,()=>{this.show()})}}shouldStopPlaying(t,e,s){return t===!1&&e.index>=s&&this.status.value===O.playing||e.options.stop===!0}shouldPlayNext(){return this.status.value===O.playing}}class Q{constructor(t,e=null,s=null){o(this,"node"),o(this,"config"),o(this,"emit",null),o(this,"size",new b),o(this,"inFullScreen",()=>!!document.fullscreenElement),this.node=t,this.config=e,this.emit=s}static async getSize(t){const e=new Q(t);return await e.updateSize(),e.size}addResizeListener(){window.addEventListener("resize",()=>this.updateSize(),{passive:!0})}removeResizeListener(){window.removeEventListener("resize",this.updateSize)}getAspectRatio(){if(this.config!==null){const[t,e]=this.config.aspectRatio.split(":");return[parseFloat(t),parseFloat(e)]}return[16,9]}async updateSize(){if(this.size.reset(),await j(),this.node.value===null)return;const t=getComputedStyle(this.node.value),e=parseFloat(t.width);let s=parseFloat(t.height);if(["0px","auto",null].includes(t.height)){const[i,h]=this.getAspectRatio();s=e/i*h}this.size.update({width:e,height:s})}toggleFullScreen(){this.inFullScreen()?this.exitFullScreen():this.enterFullScreen()}async enterFullScreen(){var t,e;((t=this.node)==null?void 0:t.value)===null||!((e=this.config)!=null&&e.allowFullscreen)||(await this.node.value.requestFullscreen(),this.emit!==null&&this.emit("fullscreenEnter"))}async exitFullScreen(){await document.exitFullscreen(),this.emit!==null&&this.emit("fullscreenExit")}}class Ut{constructor(t,e){o(this,"config"),o(this,"player"),this.config=t,this.player=e}setup(){this.removeKeyListener(),this.config.bindKeys&&this.addKeyListener()}addKeyListener(){window.addEventListener("keydown",t=>this.keydown(t),{passive:!0})}removeKeyListener(){window.removeEventListener("keydown",()=>this.keydown)}keydown(t){if(["ArrowLeft","Left"].includes(t.key)){this.player.show(z.prev);return}if(["ArrowRight","Right"].includes(t.key)){this.player.show(z.next);return}}}class Yt{constructor(){o(this,"isOver",f(!1))}setup(t,e){e.clear("mouseOver"),t.autohideTime===0&&(this.isOver.value=!0)}toggle(t,e,s){t.autohideTime!==0&&(this.isOver.value=s,this[s?"over":"out"](t,e))}out(t,e){e.clear("mouseOver")}over(t,e){e.set("mouseOver",t.autohideTime,()=>this.isOver.value=!1)}}class Jt{constructor(){o(this,"timers",{})}set(t,e,s){this.clear(t),this.timers[t]=setTimeout(s,e)}clear(t){(t!==void 0?[t]:Object.keys(this.timers)).forEach(e=>{clearTimeout(this.timers[e]),delete this.timers[e]})}}class qt{constructor(){o(this,"startX",0),o(this,"startY",0),o(this,"startTime",0),o(this,"endTime",0),o(this,"prevTouchTime",0),o(this,"tapThreshold",5),o(this,"doubleTapThreshold",200),o(this,"slideTrigger",.3),o(this,"tap",(t,e)=>Math.abs(t)<this.tapThreshold&&Math.abs(e)<this.tapThreshold),o(this,"doubleTap",()=>this.endTime-this.prevTouchTime<this.doubleTapThreshold),o(this,"slideLeft",(t,e)=>e.size.isValid()&&t<0&&t<-(e.size.width.value*this.slideTrigger)),o(this,"slideRight",(t,e)=>e.size.isValid()&&t>0&&t>e.size.width.value*this.slideTrigger),o(this,"slideUp",(t,e)=>e.size.isValid()&&t<0&&t<-(e.size.height.value*this.slideTrigger)),o(this,"slideDown",(t,e)=>e.size.isValid()&&t>0&&t>e.size.height.value*this.slideTrigger)}start(t,e){e.enableGestures&&(this.startTime=Date.now(),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY)}end(t,e,s,i,h,u){this.prevTouchTime=this.endTime,this.endTime=Date.now();const d=t.changedTouches[0].clientX-this.startX,l=t.changedTouches[0].clientY-this.startY;if(this.tap(d,l)){u.toggle(e,h,!0);return}e.enableGestures&&(this.slideRight(d,i)?s.show(z.prev):this.slideLeft(d,i)&&s.show(z.next))}}const Qt={key:2,class:"complements"},Zt=p("div",{class:"remainder upper"},null,-1),te=p("div",{class:"remainder lower"},null,-1),ee=L({__name:"VueFlux",props:{options:{default:()=>({})},rscs:{},transitions:{}},emits:["created","mounted","unmounted","play","stop","show","optionsUpdated","transitionsUpdated","resourcesPreloadStart","resourcesPreloadEnd","resourcesLazyloadStart","resourcesLazyloadEnd","fullscreenEnter","fullscreenExit","transitionStart","transitionCancel","transitionEnd"],setup(n,{expose:t,emit:e}){const s=n,i=e,h=f(null),u=f(null),d=f(null),l=N({allowFullscreen:!1,allowToSkipTransition:!0,aspectRatio:"16:9",autohideTime:2500,autoplay:!1,bindKeys:!1,delay:5e3,enableGestures:!1,infinite:!0,lazyLoad:!0,lazyLoadAfter:5}),c=new Jt,r=new Xt(l,c,i),g=r.resources,y=r.transitions,m=new Q(h,l,i),$=new Ut(l,r),A=new Yt,I=new qt,M=()=>{Object.assign(l,s.options),A.setup(l,c),$.setup()};J(s.options,()=>{M(),i("optionsUpdated")});async function W(k){const w=r.status.value===O.playing;w&&await r.stop(!0),await{rscs:async()=>await Z(),transitions:()=>tt()}[k](),w&&r.play()}async function Z(){r.resource.reset();const k=l.lazyLoad?l.lazyLoadAfter:s.rscs.length;try{await g.update(st(s.rscs),k,m.size)}catch(w){console.error(w)}g.list.length&&r.resource.init(g)}J(()=>s.rscs,async()=>{await W("rscs")},{deep:!1});function tt(){r.transition.reset(),y.update(st(s.transitions)),r.transition.init(y)}J(s.transitions,async()=>{await W("transitions"),i("transitionsUpdated")},{deep:!1}),q(async()=>{M(),await m.updateSize(),m.addResizeListener(),r.setup(d),tt(),await Z(),l.autoplay===!0&&r.play(),i("mounted")}),at(()=>{c.clear(),m.removeResizeListener(),$.removeKeyListener(),i("unmounted")});const vt=S(()=>m.size.isValid()?m.inFullScreen()?{width:"100% !important",height:"100% !important"}:m.size.toPx():{});return t({show:r.show.bind(r),play:r.play.bind(r),stop:r.stop.bind(r),getPlayer:()=>r,size:m.size}),i("created"),(k,w)=>(v(),x("div",{ref_key:"$el",ref:h,class:"vue-flux",style:U(vt.value),onMousemove:w[3]||(w[3]=C=>a(A).toggle(l,a(c),!0)),onMouseleave:w[4]||(w[4]=C=>a(A).toggle(l,a(c),!1)),onDblclick:w[5]||(w[5]=C=>a(m).toggleFullScreen()),onTouchstart:w[6]||(w[6]=C=>a(I).start(C,l)),onTouchend:w[7]||(w[7]=C=>a(I).end(C,l,a(r),a(m),a(c),a(A)))},[a(r).transition.current!==null&&a(m).size.isValid()&&a(r).resource.from!==null&&a(r).resource.to!==null?(v(),_(a(Mt),{key:0,ref_key:"$transition",ref:u,transition:a(r).transition.current.component,size:a(m).size,from:a(r).resource.from.rsc,to:a(r).resource.to.rsc,"display-component":d.value,options:a(r).transition.current.options,onReady:w[0]||(w[0]=C=>{var et;return(et=u.value)==null?void 0:et.start()}),onStart:w[1]||(w[1]=C=>a(r).start()),onEnd:w[2]||(w[2]=C=>a(r).end())},null,8,["transition","size","from","to","display-component","options"])):F("",!0),a(r).resource.current!==null?(v(),_(G(a(r).resource.current.rsc.display.component),lt({key:1,ref_key:"$displayComponent",ref:d,size:a(m).size,rsc:a(r).resource.current.rsc},a(r).resource.current.rsc.display.props),null,16,["size","rsc"])):F("",!0),a(m).size.isValid()?(v(),x("div",Qt,[R(k.$slots,"preloader",{loader:a(g).loader}),R(k.$slots,"caption",{player:a(r)}),Zt,R(k.$slots,"controls",{mouseOver:a(A).isOver,player:a(r)}),te,R(k.$slots,"index",{mouseOver:a(A).isOver,displaySize:a(m).size,player:a(r)}),R(k.$slots,"pagination",{player:a(r)})])):F("",!0)],36))}}),se=L({__name:"FluxCaption",props:{player:{}},setup(n){const t=n,{resource:e,transition:s}=t.player,i=S(()=>e.current===null||e.current.rsc.caption===null?"&nbsp;":e.current.rsc.caption),h=S(()=>{const u=["flux-caption"];return s.current===null&&e.current!==null&&e.current.rsc.caption.length>0&&u.push("visible"),u});return(u,d)=>(v(),x("div",{class:ut(h.value)},[R(u.$slots,"default",{caption:i.value},()=>[yt(P(i.value),1)])],2))}}),ie=p("polyline",{points:"64,18 22,50 64,82"},null,-1),ne=L({__name:"Prev",setup(n){return(t,e)=>(v(),_(a(Y),{class:"prev top left"},{default:E(()=>[ie]),_:1}))}}),re=p("polygon",{points:"32,12 82,50 32,88"},null,-1),oe=L({__name:"Play",setup(n){return(t,e)=>(v(),_(a(Y),{class:"play"},{default:E(()=>[re]),_:1}))}}),ae=p("line",{x1:"32",y1:"22",x2:"32",y2:"78"},null,-1),le=p("line",{x1:"68",y1:"22",x2:"68",y2:"78"},null,-1),ue=L({__name:"Stop",setup(n){return(t,e)=>(v(),_(a(Y),{class:"pause"},{default:E(()=>[ae,le]),_:1}))}}),he=p("polyline",{points:"36,18 78,50 36,82"},null,-1),ce=L({__name:"Next",setup(n){return(t,e)=>(v(),_(a(Y),{class:"next top right"},{default:E(()=>[he]),_:1}))}}),de={key:0,class:"flux-controls"},pe=L({__name:"FluxControls",props:{mouseOver:{default:void 0},player:{}},setup(n){const t=n,e=S(()=>!(t.player.resource.current===null||t.mouseOver!==void 0&&a(t.mouseOver)===!1));return(s,i)=>(v(),_(ft,{name:"fade"},{default:E(()=>[e.value?(v(),x("div",de,[V(ne,{onClick:i[0]||(i[0]=h=>s.player.show(a(z).prev))}),(s.player.status.value||s.player.status)===a(O).stopped?(v(),_(oe,{key:0,onClick:i[1]||(i[1]=h=>s.player.play(a(z).next,1))})):F("",!0),(s.player.status.value||s.player.status)===a(O).playing?(v(),_(ue,{key:1,onClick:i[2]||(i[2]=h=>s.player.stop())})):F("",!0),V(ce,{onClick:i[3]||(i[3]=h=>s.player.show(a(z).next))})])):F("",!0)]),_:1}))}}),ge={key:0,class:"flux-pagination"},ve=["title","onClick"],ye=L({__name:"FluxPagination",props:{player:{}},setup(n){const t=n,{player:{resources:e,resource:s,transition:i}}=t,h=S(()=>e.list.length>0),u=l=>l.resource.caption,d=(l,c)=>{var r;const g=[c];let y=((r=s.current)==null?void 0:r.index)===l;return i.current!==null&&(y=!1),y===!0&&g.push("active"),g};return(l,c)=>h.value?(v(),x("nav",ge,[p("ul",null,[(v(!0),x(ht,null,mt(l.player.resources.list,(r,g)=>(v(),x("li",{key:g},[R(l.$slots,"default",{index:g,rsc:r,title:u(r),cssClass:d(g,"custom-pagination-item")},()=>[p("span",{title:u(r),class:ut(d(g,"pagination-item")),onClick:y=>l.player.show(g)},null,10,ve)])]))),128))])])):F("",!0)}}),fe={class:"preloader"},me={key:0,class:"spinner"},we={class:"pct"},ze=p("div",{class:"border"},null,-1),xe=L({__name:"FluxPreloader",props:{loader:{}},setup(n){return(t,e)=>{var s,i,h;return v(),x("div",fe,[R(t.$slots,"default",{loader:t.loader,preloading:(s=t.loader.value)==null?void 0:s.preLoading.length,lazyloading:(i=t.loader.value)==null?void 0:i.lazyLoading.length,pct:(h=t.loader.value)==null?void 0:h.progress},()=>{var u,d;return[(u=t.loader.value)!=null&&u.preLoading.length?(v(),x("div",me,[p("div",we,P((d=t.loader.value)==null?void 0:d.progress)+"%",1),ze])):F("",!0)]})])}}});function _e(n,t){Object.assign(n,{direction:z.next},t)}const Se=L({__name:"Slide",props:{options:{},size:{},from:{},to:{},maskStyle:{},displayComponent:{}},setup(n,{expose:t}){const e=n,s=f(null),i=f(null),h=f(null),u=N({totalDuration:1400,easing:"ease-in-out"});_e(u,e.options);const d=`transform ${u.totalDuration}ms ${u.easing}`,l={size:new b({width:e.size.width.value*2,height:e.size.height.value}),css:{display:"flex",flexWrap:"nowrap"}};let c,r;({[z.prev]:()=>{c=e.to,r=e.from,l.css.transform="translateX(-50%)"},[z.next]:()=>{c=e.from,r=e.to}})[u.direction]();const g={[z.prev]:()=>{s.value.transform({transition:d,transform:"translateX(0)"})},[z.next]:()=>{s.value.transform({transition:d,transform:"translateX(-50%)"})}};return t({onPlay:()=>{g[u.direction]()},totalDuration:u.totalDuration}),(y,m)=>(v(),_(a(Nt),lt({ref_key:"$wrapper",ref:s},l),{default:E(()=>[(v(),_(G(a(c).transition.component),{ref_key:"$left",ref:i,rsc:a(c),size:y.size},null,8,["rsc","size"])),(v(),_(G(a(r).transition.component),{ref_key:"$right",ref:h,rsc:a(r),size:y.size},null,8,["rsc","size"]))]),_:1},16))}}),Le={class:"carousel-wrapper"},Ae={__name:"BaseCarousel",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){function t(d){return Array.isArray(d)?d.map(l=>new Ft(l,"","fit")):[]}const e=f(),s=wt(n,"modelValue"),i=S(()=>t(s.value)),h=f({autoplay:!0}),u=f([Se]);return(d,l)=>(v(),x("div",Le,[V(a(ee),{options:h.value,rscs:i.value,transitions:u.value,ref_key:"$vueFlux",ref:e},{preloader:E(c=>[V(a(xe),K(H(c)),null,16)]),caption:E(c=>[V(a(se),K(H(c)),null,16)]),controls:E(c=>[V(a(pe),K(H(c)),null,16)]),pagination:E(c=>[V(a(ye),K(H(c)),null,16)]),_:1},8,["options","rscs","transitions"])]))}},be=ct(Ae,[["__scopeId","data-v-d5c9112c"]]),D=n=>(_t("data-v-594d2a77"),n=n(),St(),n),Te={class:"page-section article-info"},Re={class:"page-section game-info-container"},Ee={class:"game-img-container"},ke=["src"],Ce={class:"game-basic-container"},Pe={class:"game-basic-info"},Oe={class:"game-basic-info-row"},Ve=D(()=>p("span",null,"Год выпуска: ",-1)),Be={class:"game-basic-info-row"},Fe=D(()=>p("span",null,"Жанр: ",-1)),$e={class:"game-basic-info-row"},Ie=D(()=>p("span",null,"Разработчик: ",-1)),Me={class:"game-basic-info-row"},Ne=D(()=>p("span",null,"Издательство: ",-1)),De={class:"game-basic-info-row"},We=D(()=>p("span",null,"Платформа: ",-1)),Ke={class:"game-basic-gallery"},He=["innerHTML"],Ge={__name:"GameDetailsPage",setup(n){const t=zt(),e=f(null),s=f(!0),i=S(()=>{var d,l,c,r,g;return((g=(r=(c=(l=(d=e==null?void 0:e.value)==null?void 0:d.description)==null?void 0:l.replaceAll('src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="',""))==null?void 0:c.replaceAll(/style="width: \d*px"/gi,""))==null?void 0:r.replaceAll(/href="\S*"/gi,'href="#"'))==null?void 0:g.replaceAll("data-src","src"))||""}),h=S(()=>{var d,l;return((l=(d=e==null?void 0:e.value)==null?void 0:d.images)==null?void 0:l.map(c=>c==null?void 0:c.medium_url))||[]});function u(d,l,c=" \\ "){return!Array.isArray(d)||!l?"N/A":d.map(r=>(r==null?void 0:r[l])||"").join(c)}return q(async()=>{var d,l;if((d=t==null?void 0:t.params)!=null&&d.id)try{const c=await xt.getGameDetails(t.params.id);e.value=((l=c==null?void 0:c.data)==null?void 0:l.results)||null,s.value=!1}catch(c){it.error(c),console.log(c)}else it.error("Invalid game ID");s.value=!1}),(d,l)=>{var c,r,g,y,m,$,A,I,M;return s.value?(v(),_(Lt,{key:0,vSize:"lg"})):(v(),x(ht,{key:1},[p("h1",null,P((c=e.value)==null?void 0:c.name),1),p("div",Te,[p("span",null,"🕓 Обновлено: "+P((r=e.value)==null?void 0:r.date_last_updated),1)]),p("div",Re,[p("div",Ee,[p("img",{src:(y=(g=e.value)==null?void 0:g.image)==null?void 0:y.medium_url,alt:""},null,8,ke)]),p("div",Ce,[p("div",Pe,[p("div",Oe,[Ve,p("span",null,P(((m=e.value)==null?void 0:m.original_release_date)||"N/A"),1)]),p("div",Be,[Fe,p("span",null,P(u(($=e.value)==null?void 0:$.genres,"name")),1)]),p("div",$e,[Ie,p("span",null,P(u((A=e.value)==null?void 0:A.developers,"name")),1)]),p("div",Me,[Ne,p("span",null,P(u((I=e.value)==null?void 0:I.publishers,"name")),1)]),p("div",De,[We,p("span",null,P(u((M=e.value)==null?void 0:M.platforms,"name")),1)])]),p("div",Ke,[V(be,{modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=W=>h.value=W)},null,8,["modelValue"])])])]),p("div",{class:"page-section game-description-container",innerHTML:i.value},null,8,He)],64))}}},Xe=ct(Ge,[["__scopeId","data-v-594d2a77"]]);export{Xe as default};
